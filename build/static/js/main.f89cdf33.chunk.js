(this["webpackJsonpshop-later-reactapp"]=this["webpackJsonpshop-later-reactapp"]||[]).push([[0],{30:function(e,t,a){e.exports=a(52)},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),l=a(14),i=a(16),s=a(11),d=(a(38),a(39),a(23)),u=a(24),m=a(4),f=a(5),p=a(7),h=a(6),v=a(2),E=a(12),b=a(29),N=a(19);a(42);function j(e){e.tag,e.className,e.childrenm;var t=Object(N.a)(e,["tag","className","childrenm"]);return r.a.createElement(e.tag,Object(b.a)({className:["NavShopButton",e.className].join(" ")},t),e.children)}j.defaultProps={tag:"a"};var y=r.a.createContext({lists:[],folders:[],addFolder:function(){},addList:function(){},deleteList:function(){}}),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===t}))},_=(a(43),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.context,t=e.folders,a=void 0===t?[]:t,n=e.lists,o=void 0===n?[]:n;return r.a.createElement("div",{className:"ShopListNav"},r.a.createElement("ul",{className:"ShopListNav__list"},a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.c,{className:"ShopListNav__folder-link",to:"/folder/".concat(e.id)},r.a.createElement("span",{className:"ShopListNav__num-lists"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return e.folderId===t})).length}(o,e.id)),e.name))}))),r.a.createElement("div",{className:"ShopListNav__button-wrapper"},r.a.createElement(j,{tag:s.b,to:"/add-folder",type:"button",className:"ShopListNav__add-folder-button"},r.a.createElement(E.a,{icon:"plus"}),r.a.createElement("br",null),"Folder")))}}]),a}(r.a.Component));_.contextType=y;a(46);var P=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.context,a=t.lists,n=t.folders,o=this.props.match.params.listId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find((function(e){return e.id===t}))}(n,(O(a,o)||{}).folderId);return r.a.createElement("div",{className:"ShopPageNav"},r.a.createElement(j,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"ShopPageNav__back-button"},r.a.createElement(E.a,{icon:"chevron-left"}),r.a.createElement("br",null),"Back"),c&&r.a.createElement("h3",{className:"ShopPageNav__folder-name"},c.name))}}]),a}(r.a.Component);P.defaultProps={history:{goBack:function(){}},match:{params:{}}},P.contextType=y;var g=a(54),S={API_KEY:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_KEY},L=(a(47),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClickDelete=function(t){t.preventDefault();var a=e.props.id;fetch("".concat(S.API_ENDPOINT,"/lists/").concat(a),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){e.context.deleteList(a),e.props.onDeleteList(a)})).catch((function(e){console.error({error:e})}))},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.id,n=e.modified;return r.a.createElement("div",{className:"List"},r.a.createElement("h2",{className:"List__title"},r.a.createElement(s.b,{to:"/list/".concat(a)},t)),r.a.createElement("button",{className:"List__delete",type:"button",onClick:this.handleClickDelete},r.a.createElement(E.a,{icon:"trash-alt"})," ","remove"),r.a.createElement("div",{className:"List__dates"},r.a.createElement("div",{className:"List__dates-modified"},"Modified"," ",r.a.createElement("span",{className:"Date"},Object(g.a)(n,"Do MMM YYYY")))))}}]),a}(r.a.Component));L.defaultProps={onDeleteList:function(){}},L.contextType=y;a(48);var k=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.lists,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter((function(e){return e.folderId===t})):e}(void 0===t?[]:t,e);return r.a.createElement("section",{className:"ShopListMain"},r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(L,{id:e.id,name:e.name,modified:e.modified}))}))),r.a.createElement("div",{className:"ShopListMain__button-container"},r.a.createElement(j,{tag:s.b,to:"/add-list",type:"button",className:"ShopListMain__add-list-button"},r.a.createElement(E.a,{icon:"plus"}),r.a.createElement("br",null),"List")))}}]),a}(r.a.Component);k.defaultProps={match:{params:{}}},k.contextType=y;a(49);var A=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleDeleteList=function(t){e.props.history.push("/")},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.context.lists,t=void 0===e?[]:e,a=this.props.match.params.listId,n=O(t,a)||{content:""};return r.a.createElement("section",{className:"ShopPageMain"},r.a.createElement(L,{id:n.id,name:n.name,modified:n.modified,onDeleteList:this.handleDeleteList}),r.a.createElement("div",{className:"ShopPageMain__content"},n.content.split(/\n \r|\n/).map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}}]),a}(r.a.Component);A.defaultProps={match:{params:{}}},A.contextType=y;a(50);function D(e){var t=e.className,a=Object(N.a)(e,["className"]);return r.a.createElement("form",Object.assign({className:["ShopLater-form",t].join(" "),action:"#"},a))}var I=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault();var a={name:t.target["folder-name"].value};fetch("".concat(S.API_ENDPOINT,"/folders"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){e.context.addFolder(t),e.props.history.push("/folder/".concat(t.id))})).catch((function(e){console.error({error:e})}))},e}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"AddFolder"},r.a.createElement("h2",null,"Create a folder"),r.a.createElement(D,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"folder-name-input"},"Name"),r.a.createElement("input",{type:"text",id:"folder-name-input",name:"folder-name"})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Add folder"))))}}]),a}(n.Component);I.defaultProps={history:{push:function(){}}},I.contextType=y;var x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(t){t.preventDefault();var a={name:t.target["list-name"].value,content:t.target["list-content"].value,folderId:t.target["list-folder-id"].value,modified:new Date};fetch("".concat(S.API_ENDPOINT,"/lists"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){e.context.addList(t),e.props.history.push("/folder/".concat(t.folderId))})).catch((function(e){console.error({error:e})}))},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.context.folders,t=void 0===e?[]:e;return r.a.createElement("section",{className:"AddList"},r.a.createElement("h2",null,"Create a list"),r.a.createElement(D,{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"list-name-input"},"Name"),r.a.createElement("input",{type:"text",id:"list-name-input",name:"list-name"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"list-content-input"},"Content"),r.a.createElement("textarea",{id:"list-content-input",name:"list-content"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"list-folder-select"},"Folder"),r.a.createElement("select",{id:"list-folder-select",name:"list-folder-id"},r.a.createElement("option",{value:null},"..."),t.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Add list"))))}}]),a}(n.Component);x.defaultProps={history:{push:function(){}}},x.contextType=y;a(51);var T=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={lists:[],folders:[]},e.handleAddFolder=function(t){e.setState({folders:[].concat(Object(u.a)(e.state.folders),[t])})},e.handleAddList=function(t){e.setState({lists:[].concat(Object(u.a)(e.state.lists),[t])})},e.handleDeleteList=function(t){e.setState({lists:e.state.lists.filter((function(e){return e.id!==t}))})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(S.API_ENDPOINT,"/lists")),fetch("".concat(S.API_ENDPOINT,"/folders"))]).then((function(e){var t=Object(d.a)(e,2),a=t[0],n=t[1];return a.ok?n.ok?Promise.all([a.json(),n.json()]):n.json().then((function(e){return Promise.reject(e)})):a.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var a=Object(d.a)(t,2),n=a[0],r=a[1];e.setState({lists:n,folders:r})})).catch((function(e){console.error({error:e})}))}},{key:"renderNavRoutes",value:function(){return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map((function(e){return r.a.createElement(v.a,{exact:!0,key:e,path:e,component:_})})),r.a.createElement(v.a,{path:"/list/:listId",component:P}),r.a.createElement(v.a,{path:"/add-folder",component:P}),r.a.createElement(v.a,{path:"/add-list",component:P}))}},{key:"renderMainRoutes",value:function(){return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map((function(e){return r.a.createElement(v.a,{exact:!0,key:e,path:e,component:k})})),r.a.createElement(v.a,{path:"/list/:listId",component:A}),r.a.createElement(v.a,{path:"/add-folder",component:I}),r.a.createElement(v.a,{path:"/add-list",component:x}))}},{key:"render",value:function(){var e={lists:this.state.lists,folders:this.state.folders,addFolder:this.handleAddFolder,addList:this.handleAddList,deleteList:this.handleDeleteList};return r.a.createElement(y.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),r.a.createElement("header",{className:"App__header"},r.a.createElement("h1",null,r.a.createElement(s.b,{to:"/"},"ShopLater")," ",r.a.createElement(E.a,{icon:"check-double"}))),r.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),a}(n.Component);l.b.add(i.c,i.b,i.d,i.a),c.a.render(r.a.createElement(s.a,null,r.a.createElement(T,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.f89cdf33.chunk.js.map